+ set -euo pipefail
+ IFS='
	'
+ umask 027
+ set -o noclobber
+ PY=python3
+ SRC_DIR=src
++ mktemp
+ tmp=/tmp/tmp.wK9yJwP3KD
+ trap 'cleanup $?' EXIT INT TERM
+ echo 'Demostrando pipefail:'
Demostrando pipefail:
+ set +o pipefail
+ false
+ true
+ echo 'Sin pipefail: el pipe se considera exitoso (status 0).'
Sin pipefail: el pipe se considera exitoso (status 0).
+ set -o pipefail
+ false
+ true
+ echo 'Con pipefail: se detecta el fallo (status != 0).'
Con pipefail: se detecta el fallo (status != 0).
+ cat
+ check_deps
+ deps=('python3' 'grep')
+ local -a deps
+ for dep in "${deps[@]}"
+ command -v python3
+ for dep in "${deps[@]}"
+ command -v grep
+ run_tests src/hello.py
+ local script=src/hello.py
+ local output
++ python3 src/hello.py
+ output='Hola, Mundo!'
+ echo 'Hola, Mundo!'
+ grep -Fq 'Hello, World!'
+ echo 'Test falló: salida inesperada'
Test falló: salida inesperada
+ mv -- src/hello.py src/hello.py.bak
+ exit 2
+ cleanup 2
+ rc=2
+ rm -f /tmp/tmp.wK9yJwP3KD
+ '[' -f src/hello.py.bak ']'
+ mv -- src/hello.py.bak src/hello.py
+ exit 2
